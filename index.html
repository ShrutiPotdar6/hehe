<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Playground • Organic Floating Bubbles</title>
<style>
  :root{
    --ink:#0f172a; --muted:#64748b; --ring:rgba(124,58,237,.35);
    --bg1:#ffffff; --bg2:#f5f7ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    color:var(--ink);
    background: radial-gradient(1200px 800px at 20% 10%, #eef2ff, transparent),
                radial-gradient(1000px 700px at 80% 90%, #ecfeff, transparent),
                linear-gradient(180deg, var(--bg1), var(--bg2));
    overflow:hidden;
  }

  /* Top bar */
  .topbar{
    position:fixed; inset-inline:0; top:0; height:60px; z-index:1000;
    display:flex; align-items:center; gap:10px; padding:0 14px;
    background:rgba(255,255,255,.9); backdrop-filter:blur(8px);
    border-bottom:1px solid rgba(2,6,23,.06);
  }
  .back{
    display:inline-flex; align-items:center; gap:10px; padding:8px 14px;
    text-decoration:none; color:var(--ink); background:#fff; border-radius:999px;
    border:1px solid rgba(2,6,23,.08); box-shadow:0 6px 20px rgba(15,23,42,.06);
  }
  .hint{ margin-left:auto; font-size:14px; color:var(--muted) }

  .stage{ position:relative; width:100%; height:100vh; padding-top:60px }
  .cloud{ position:absolute; inset:0; overflow:hidden }

  /* Bubbles (clickable) */
  .bubble{
    position:absolute;
    width:var(--size);
    height:var(--size);
    border-radius:50%;
    background:#fff;
    display:grid; place-items:center;
    border:none; cursor:pointer;
    box-shadow:0 14px 60px rgba(15,23,42,.12), inset 0 0 0 2px rgba(255,255,255,.75);
    will-change: transform;
    transition: box-shadow .2s ease;
  }
  .bubble:hover{ box-shadow:0 18px 80px rgba(15,23,42,.16), inset 0 0 0 2px rgba(255,255,255,.8) }
  .bubble:focus-visible{ outline:4px solid var(--ring); outline-offset:2px }
  .bubble img{
    width:86%; height:86%; border-radius:50%; object-fit:cover;
    user-select:none; -webkit-user-drag:none;
    box-shadow: inset 0 0 0 10px rgba(255,255,255,.6);
    pointer-events:none;
  }
  .label{
    position:absolute; bottom:-32px; left:50%; transform:translateX(-50%);
    font-size:13px; color:var(--muted); background:rgba(255,255,255,.95);
    border:1px solid rgba(2,6,23,.08); border-radius:999px; padding:6px 10px;
    box-shadow:0 6px 20px rgba(15,23,42,.06); pointer-events:none;
  }

  /* Modal */
  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center;
          background:rgba(15,23,42,.35); backdrop-filter:blur(4px); z-index:2000; }
  .modal[open]{ display:flex }
  .dialog{ width:min(92vw,960px); height:min(80vh,640px); background:#fff; border-radius:16px;
           overflow:hidden; box-shadow:0 30px 120px rgba(0,0,0,.25); display:flex; flex-direction:column }
  .modalbar{ height:48px; display:flex; align-items:center; gap:8px; padding:0 10px; border-bottom:1px solid rgba(2,6,23,.06)}
  .modalbar .title{ font-size:14px; color:var(--muted) }
  .modalbar button{ margin-left:auto; border:1px solid rgba(2,6,23,.1); border-radius:10px; padding:6px 10px; background:#f1f5f9; cursor:pointer }
  iframe{ flex:1; width:100%; border:0; background:#0b1220 }
</style>
</head>
<body>

<header class="topbar" role="banner">
  <a class="back" href="https://your-portfolio-link.com" aria-label="Back to portfolio">← Back to portfolio</a>
  <div class="hint">Click a bubble to play • Esc to close</div>
</header>

<main class="stage" role="main" aria-describedby="pageHint">
  <p id="pageHint" style="position:absolute;left:-9999px">Floating image bubbles. Click any bubble to open a mini-game.</p>
  <div id="cloud" class="cloud">
    <!-- Define six bubbles (images + game files) -->
    <button class="bubble" data-label="Flappy"      data-game="flappy.html"      style="--size:360px"><img src="hana.png"   alt="Flappy cover"><span class="label">Flappy</span></button>
    <button class="bubble" data-label="Breakout"    data-game="breakout.html"    style="--size:240px"><img src="skynn.png"  alt="Breakout cover"><span class="label">Breakout</span></button>
    <button class="bubble" data-label="2048"        data-game="2048.html"        style="--size:300px"><img src="brely.png"  alt="2048 cover"><span class="label">2048</span></button>
    <button class="bubble" data-label="Tic-Tac-Toe" data-game="tictactoe.html"   style="--size:260px"><img src="dino.png"   alt="Tic-Tac-Toe cover"><span class="label">Tic-Tac-Toe</span></button>
    <button class="bubble" data-label="Minesweeper" data-game="mines.html"       style="--size:340px"><img src="saaho.png"  alt="Mines cover"><span class="label">Minesweeper</span></button>
    <button class="bubble" data-label="Platformer"  data-game="platformer.html"  style="--size:240px"><img src="ideas.png"  alt="Platformer cover"><span class="label">Platformer</span></button>
  </div>
</main>

<!-- Modal -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modaltitle">
  <div class="dialog">
    <div class="modalbar">
      <div class="title" id="modaltitle">Game</div>
      <button id="close">Close</button>
    </div>
    <iframe id="frame" allow="autoplay; fullscreen"></iframe>
  </div>
</div>

<script>
  // ======= CONFIG =======
  const TOPBAR_H = 60;             // keep bubbles out from beneath topbar
  const MARGIN   = 12;             // wall padding
  const MIN_SPD  = 16;             // px/sec (min drift)
  const MAX_SPD  = 42;             // px/sec (max drift)
  const ACCEL    = 8;              // px/sec^2 (random "wind" strength)
  const DAMP     = 0.995;          // velocity damping each frame (keeps it smooth)
  const TURN_EVERY_MS = 1400;      // wander steering interval

  const rnd = (a,b) => a + Math.random()*(b-a);
  const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
  const sign = (v)=> (v<0?-1:1);

  // ---- Setup bubbles ----
  const cloud = document.getElementById('cloud');
  const bubbles = [...cloud.querySelectorAll('.bubble')].map(el => {
    const size = parseFloat(getComputedStyle(el).getPropertyValue('--size'));
    return {
      el,
      size,
      // random starting position (not under the top bar)
      x: rnd(MARGIN + size/2, window.innerWidth - MARGIN - size/2),
      y: rnd(TOPBAR_H + size/2 + 10, window.innerHeight - MARGIN - size/2),
      // random initial velocity
      vx: rnd(-1,1) * rnd(MIN_SPD, MAX_SPD),
      vy: rnd(-1,1) * rnd(MIN_SPD, MAX_SPD),
      // steering timer
      t: 0,
      nextTurn: TURN_EVERY_MS * rnd(0.5,1.8)
    };
  });

  // Depth sorting (bigger y = above others)
  function depthSort(){
    bubbles.sort((a,b)=>a.y - b.y);
    bubbles.forEach((b,i)=>{ b.el.style.zIndex = String(100 + i); });
  }

  // ---- Animation loop (organic drift + soft bounces + wandering) ----
  let last = performance.now();
  function tick(now){
    const dt = (now - last) / 1000; // seconds
    last = now;
    const W = window.innerWidth, H = window.innerHeight;

    for(const b of bubbles){
      // Random steering (smooth wander)
      b.t += dt*1000;
      if(b.t > b.nextTurn){
        b.t = 0;
        b.nextTurn = TURN_EVERY_MS * rnd(0.6, 1.6);
        // Add a small random "wind" impulse
        const a = Math.random()*Math.PI*2;
        b.vx += Math.cos(a)*ACCEL;
        b.vy += Math.sin(a)*ACCEL;
      }

      // Damping & clamp speed range
      b.vx *= DAMP; b.vy *= DAMP;
      const speed = Math.hypot(b.vx, b.vy) || 1;
      const maxScale = clamp(speed, MIN_SPD, MAX_SPD) / speed;
      b.vx *= maxScale; b.vy *= maxScale;

      // Integrate position
      b.x += b.vx * dt;
      b.y += b.vy * dt;

      // Soft “bounce” at edges
      const half = b.size/2;
      const minX = MARGIN + half, maxX = W - MARGIN - half;
      const minY = TOPBAR_H + half, maxY = H - MARGIN - half;

      if(b.x < minX){ b.x = minX; b.vx = Math.abs(b.vx); }
      if(b.x > maxX){ b.x = maxX; b.vx = -Math.abs(b.vx); }
      if(b.y < minY){ b.y = minY; b.vy = Math.abs(b.vy); }
      if(b.y > maxY){ b.y = maxY; b.vy = -Math.abs(b.vy); }

      // Render position (center-based)
      b.el.style.transform = `translate(${Math.round(b.x - half)}px, ${Math.round(b.y - half)}px)`;
    }

    // z-index based on y so overlaps feel natural
    depthSort();
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);

  // Reflow on resize
  window.addEventListener('resize', () => {
    const W = window.innerWidth, H = window.innerHeight;
    for(const b of bubbles){
      const half = b.size/2;
      b.x = clamp(b.x, MARGIN + half, W - MARGIN - half);
      b.y = clamp(b.y, TOPBAR_H + half, H - MARGIN - half);
    }
  });

  // ---- Modal logic (load external game files) ----
  const modal = document.getElementById('modal');
  const frame = document.getElementById('frame');
  const title = document.getElementById('modaltitle');
  const closeBtn = document.getElementById('close');

  bubbles.forEach(b => {
    b.el.addEventListener('click', () => {
      const file = b.el.dataset.game;
      title.textContent = b.el.dataset.label || file.replace('.html','');
      frame.src = file;                   // loads your separate game file
      modal.setAttribute('open','');
    });
  });

  function closeModal(){
    frame.src = '';
    modal.removeAttribute('open');
  }
  closeBtn.addEventListener('click', closeModal);
  document.addEventListener('keydown', e => { if(e.key==='Escape' && modal.hasAttribute('open')) closeModal(); });
  modal.addEventListener('click', e => { if(e.target === modal) closeModal(); });
</script>

</body>
</html>
