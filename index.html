<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Playground • Organic Floating Bubbles</title>
<style>
  :root{ --ink:#0f172a; --muted:#64748b; --ring:rgba(124,58,237,.35); --bg1:#ffffff; --bg2:#f5f7ff; }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    color:var(--ink);
    background: radial-gradient(1200px 800px at 20% 10%, #eef2ff, transparent),
                radial-gradient(1000px 700px at 80% 90%, #ecfeff, transparent),
                linear-gradient(180deg, var(--bg1), var(--bg2));
    overflow:hidden;
  }

  /* Top bar */
  .topbar{
    position:fixed; inset-inline:0; top:0; height:60px; z-index:1000;
    display:flex; align-items:center; gap:10px; padding:0 14px;
    background:rgba(255,255,255,.9); backdrop-filter:blur(8px);
    border-bottom:1px solid rgba(2,6,23,.06);
  }
  .back{
    display:inline-flex; align-items:center; gap:10px; padding:8px 14px;
    text-decoration:none; color:var(--ink); background:#fff; border-radius:999px;
    border:1px solid rgba(2,6,23,.08); box-shadow:0 6px 20px rgba(15,23,42,.06);
  }
  .hint{ margin-left:auto; font-size:14px; color:var(--muted) }

  .stage{ position:relative; width:100%; height:100vh; padding-top:60px }
  .cloud{ position:absolute; inset:0; overflow:hidden }

  /* Bubbles (JS controls transform; no CSS animations here) */
  .bubble{
    position:absolute;
    width:var(--size);
    height:var(--size);
    border-radius:50%;
    background:#fff;
    display:grid; place-items:center;
    border:none; cursor:pointer;
    box-shadow:0 14px 60px rgba(15,23,42,.12), inset 0 0 0 2px rgba(255,255,255,.75);
    will-change: transform;
    transition: box-shadow .2s ease;
  }
  .bubble:hover{ box-shadow:0 18px 80px rgba(15,23,42,.16), inset 0 0 0 2px rgba(255,255,255,.8) }
  .bubble:focus-visible{ outline:4px solid var(--ring); outline-offset:2px }
  .bubble img{
    width:86%; height:86%; border-radius:50%; object-fit:cover;
    user-select:none; -webkit-user-drag:none;
    box-shadow: inset 0 0 0 10px rgba(255,255,255,.6);
    pointer-events:none;
  }
  .label{
    position:absolute; bottom:-32px; left:50%; transform:translateX(-50%);
    font-size:13px; color:var(--muted); background:rgba(255,255,255,.95);
    border:1px solid rgba(2,6,23,.08); border-radius:999px; padding:6px 10px;
    box-shadow:0 6px 20px rgba(15,23,42,.06); pointer-events:none;
  }

  /* Modal */
  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center;
          background:rgba(15,23,42,.35); backdrop-filter:blur(4px); z-index:2000; }
  .modal[open]{ display:flex }
  .dialog{ width:min(92vw,960px); height:min(80vh,640px); background:#fff; border-radius:16px;
           overflow:hidden; box-shadow:0 30px 120px rgba(0,0,0,.25); display:flex; flex-direction:column }
  .modalbar{ height:48px; display:flex; align-items:center; gap:8px; padding:0 10px; border-bottom:1px solid rgba(2,6,23,.06)}
  .modalbar .title{ font-size:14px; color:var(--muted) }
  .modalbar button{ margin-left:auto; border:1px solid rgba(2,6,23,.1); border-radius:10px; padding:6px 10px; background:#f1f5f9; cursor:pointer }
  iframe{ flex:1; width:100%; border:0; background:#0b1220 }
</style>
</head>
<body>

<header class="topbar" role="banner">
  <a class="back" href="https://shrutis-supercool-site-b8b5c2.webflow.io/" aria-label="Back to portfolio">← Back to portfolio</a>
  <div class="hint">Click a bubble to play • Esc to close</div>
</header>

<main class="stage" role="main" aria-describedby="pageHint">
  <p id="pageHint" style="position:absolute;left:-9999px">Floating image bubbles. Click any bubble to open a mini-game.</p>
  <div id="cloud" class="cloud">
    <!-- Use your images; keep filenames of games below -->
    <button class="bubble" data-label="Flappy Neo"    data-game="flappy.html"     style="--size:360px"><img src="flappy.png"   alt="Flappy cover"><span class="label">Flappy Neo</span></button>
    <button class="bubble" data-label="Breakout Prism" data-game="breakout.html"  style="--size:260px"><img src="prism.png"  alt="Breakout cover"><span class="label">Breakout Prism</span></button>
    <button class="bubble" data-label="Sky Platformer" data-game="platformer.html" style="--size:300px"><img src="sky.png"  alt="Platformer cover"><span class="label">Sky Platformer</span></button>
    <button class="bubble" data-label="Space Invaders" data-game="invaders.html"  style="--size:280px"><img src="space.png"  alt="Invaders cover"><span class="label">Space Invaders</span></button>
    <button class="bubble" data-label="Glow Snake"     data-game="snake.html"     style="--size:240px"><img src="snake.png"  alt="Snake cover"><span class="label">Glow Snake</span></button>
    <button class="bubble" data-label="Tiny Tetris"    data-game="tetris.html"    style="--size:260px"><img src="tiny.png"   alt="Tetris cover"><span class="label">Tiny Tetris</span></button>
  </div>
</main>

<!-- Modal -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modaltitle">
  <div class="dialog">
    <div class="modalbar">
      <div class="title" id="modaltitle">Game</div>
      <button id="close">Close</button>
    </div>
    <iframe id="frame" allow="autoplay; fullscreen"></iframe>
  </div>
</div>

<script>
  /* ===== Motion config ===== */
  const TOPBAR_H = 60;   // keep out from under topbar
  const MARGIN   = 12;   // wall padding
  const MIN_SPD  = 16;   // px/sec
  const MAX_SPD  = 42;   // px/sec
  const ACCEL    = 8;    // random wind
  const DAMP     = 0.995;
  const TURN_EVERY_MS = 1400;

  const rnd = (a,b) => a + Math.random()*(b-a);
  const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));

  // Build bubble physics from DOM
  const cloud = document.getElementById('cloud');
  const bubbles = [...cloud.querySelectorAll('.bubble')].map(el => {
    const size = parseFloat(getComputedStyle(el).getPropertyValue('--size'));
    return {
      el, size,
      x: rnd(MARGIN + size/2, innerWidth  - MARGIN - size/2),
      y: rnd(TOPBAR_H + size/2 + 10, innerHeight - MARGIN - size/2),
      vx: rnd(-1,1) * rnd(MIN_SPD, MAX_SPD),
      vy: rnd(-1,1) * rnd(MIN_SPD, MAX_SPD),
      t: 0,
      nextTurn: TURN_EVERY_MS * rnd(0.5,1.8)
    };
  });

  function depthSort(){
    // higher y on top (prettier overlaps)
    bubbles.sort((a,b)=>a.y - b.y);
    bubbles.forEach((b,i)=> b.el.style.zIndex = String(100+i));
  }

  let last = performance.now();
  function tick(now){
    const dt = (now - last) / 1000; last = now;
    const W = innerWidth, H = innerHeight;

    for(const b of bubbles){
      // wander
      b.t += dt*1000;
      if(b.t > b.nextTurn){
        b.t = 0;
        b.nextTurn = TURN_EVERY_MS * rnd(0.6, 1.6);
        const a = Math.random()*Math.PI*2;
        b.vx += Math.cos(a)*ACCEL;
        b.vy += Math.sin(a)*ACCEL;
      }

      // damping and clamp speed
      b.vx *= DAMP; b.vy *= DAMP;
      const sp = Math.hypot(b.vx,b.vy) || 1;
      const scale = clamp(sp, MIN_SPD, MAX_SPD) / sp;
      b.vx *= scale; b.vy *= scale;

      // integrate
      b.x += b.vx * dt;
      b.y += b.vy * dt;

      // soft bounds
      const half=b.size/2, minX=MARGIN+half, maxX=W-MARGIN-half, minY=TOPBAR_H+half, maxY=H-MARGIN-half;
      if(b.x < minX){ b.x=minX; b.vx=Math.abs(b.vx); }
      if(b.x > maxX){ b.x=maxX; b.vx=-Math.abs(b.vx); }
      if(b.y < minY){ b.y=minY; b.vy=Math.abs(b.vy); }
      if(b.y > maxY){ b.y=maxY; b.vy=-Math.abs(b.vy); }

      // render (translate left/top by half to center)
      b.el.style.transform = `translate(${Math.round(b.x - half)}px, ${Math.round(b.y - half)}px)`;
    }

    depthSort();
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);

  // Resize safety
  addEventListener('resize', () => {
    const W = innerWidth, H = innerHeight;
    for(const b of bubbles){
      const half=b.size/2;
      b.x = clamp(b.x, MARGIN+half, W-MARGIN-half);
      b.y = clamp(b.y, TOPBAR_H+half, H-MARGIN-half);
    }
  });

  /* ===== Modal (opens external game files) ===== */
  const modal = document.getElementById('modal');
  const frame = document.getElementById('frame');
  const title = document.getElementById('modaltitle');
  const closeBtn = document.getElementById('close');

  bubbles.forEach(b => {
    b.el.addEventListener('click', () => {
      const file = b.el.dataset.game;
      title.textContent = b.el.dataset.label || file.replace('.html','');
      frame.src = file;
      modal.setAttribute('open','');
    });
  });

  function closeModal(){ frame.src = ''; modal.removeAttribute('open'); }
  closeBtn.addEventListener('click', closeModal);
  addEventListener('keydown', e => { if(e.key==='Escape' && modal.hasAttribute('open')) closeModal(); });
  modal.addEventListener('click', e => { if(e.target===modal) closeModal(); });
</script>

</body>
</html>
